{"version":3,"file":"vue-mfe.js","sources":["../src/utils/index.js","../src/helpers/Observer.js","../src/utils/dom.js","../src/helpers/Lazyloader.js","../src/utils/route.js","../src/utils/path.js","../src/helpers/EnhancedRouter.js","../src/index.js"],"sourcesContent":["export const isDev = process.env.NODE_ENV === 'development'\n\nexport const isMaster = process.env.VUE_APP_MASTER !== undefined\n\nexport const isPortal = !isMaster || process.env.VUE_APP_PORTAL !== undefined\n\nexport const noop = () => {}\n\nexport const isArray = (arr) => Array.isArray(arr)\n\nexport const isFunction = (fn) => fn && typeof fn === 'function'\n\nexport const isObject = (obj) => obj && typeof obj === 'object'\n\nexport const isString = (str) => typeof str === 'string'\n\nexport const toArray = (args) => Array.prototype.slice.call(args)\n\nexport const hasConsole =\n  // eslint-disable-next-line\n  typeof console !== 'undefined' && typeof console.warn === 'function'\n\nexport function assert(condition, onSuccess, onFailure) {\n  if (condition) {\n    return isFunction(onSuccess) && onSuccess()\n  } else {\n    return isFunction(onFailure) && onFailure()\n  }\n}\n\nexport const getLogger = (key) => (args) => {\n  return assert(\n    isDev,\n    // eslint-disable-next-line\n    () =>\n      hasConsole &&\n      console.log.apply(null, key ? [key, ...toArray(args)] : args),\n    noop\n  )\n}\n\nexport const getWarning = (key) => (args) => {\n  const throwError = (err) => {\n    throw new Error(err)\n  }\n\n  // eslint-disable-next-line\n  const fn = isDev ? throwError : hasConsole ? console.warn : noop\n\n  return assert(true, () => {\n    fn.apply(null, key ? [[key, ...toArray(args)].join(' > ')] : args)\n  })\n}\n\n/* https://github.com/reduxjs/redux/blob/master/src/utils/actionTypes.js */\nexport const randomString = () =>\n  Math.random()\n    .toString(36)\n    .substring(7)\n    .split('')\n    .join('.')\n\n/**\n * capitalize\n * @param {String} str\n */\nexport const capitalize = (str) =>\n  str.charAt(0).toUpperCase() + str.slice(1).toLowerCase()\n\n/**\n * camelize\n * @param {String} str\n * @param {Boolean} pascalCase\n */\nexport const camelize = (str, pascalCase = false) =>\n  str\n    .split(/-|_|\\s/g)\n    .map((s, i) => (!pascalCase && i === 0 ? s : capitalize(s)))\n    .join('')\n\n/**\n * @description resolve module whether ES Module or CommandJS module\n * @template Module\n * @property {Object} [default]\n * @param {Module & Object} module\n * @returns {*}\n */\nexport const resolveModule = (module) => (module && module.default) || module\n\n/**\n * @description Define immutable property for the given object\n * @param {Object} obj\n * @param {string} key\n * @param {*} val\n */\nexport const defineImmutableProp = (obj, key, val) => {\n  Object.defineProperty(obj, key, {\n    value: val,\n    configurable: false,\n    enumerable: false,\n    writable: false\n  })\n}\n\n/**\n * @description execute an array of promises serially\n * @template T\n * @param {Array<Promise<T>>} promises\n * @returns {Promise<T>} the finally result of promises\n */\nexport const serialExecute = (promises) => {\n  return promises.reduce((chain, next) => {\n    return chain\n      .then((retVal) => next(retVal))\n      .catch((err) => {\n        throw err\n      })\n  }, Promise.resolve())\n}\n","/**\n * @class Observer\n * @author VuChan\n * @constructor\n * @see https://github.com/vuchan/fe-utils/blob/master/helpers/Obersver.js\n * @return {Object} Observer Design Pattern Implementation\n */\nexport default function Observer() {\n  this.events = {};\n}\n\n/**\n * observer.on('eventName', function listener() {})\n * @param  {string} eventName\n * @param  {Function} listener\n * @return {Array<Function>}\n */\nObserver.prototype.on = function(eventName, listener) {\n  if (!this.events[eventName]) {\n    this.events[eventName] = [ listener ];\n  } else {\n    this.events[eventName].push(listener);\n  }\n\n  return this.events[eventName];\n};\n\n/**\n * observer.off('eventName', function listener() {})\n * @param  {string} eventName\n * @param  {Function} listener\n * @return {boolean|null}\n */\nObserver.prototype.off = function(eventName, listener) {\n  if (eventName) {\n    let handlers = this.events[eventName];\n\n    if (handlers && handlers.length) {\n      if (listener) {\n        return (handlers = handlers.filter((handler) => handler === listener));\n      } else {\n        delete this.events[eventName];\n        return true;\n      }\n    }\n  } else {\n    this.events = {};\n  }\n};\n\n/**\n * observer.emit('eventName', data1, data2, ...dataN)\n * @param  {string} eventName\n * @param  {Array}  data\n * @return {boolean}\n */\nObserver.prototype.emit = function(eventName, ...data) {\n  const handlers = this.events[eventName];\n\n  if (handlers) {\n    handlers.forEach((handler) => handler.apply(null, data));\n    return true;\n  }\n};\n","/**\n * @description lazy load style from a remote url then returns a promise\n * @param {String} url remote-url\n * @return {Promise}\n */\nexport function lazyloadStyle(url) {\n  const link = document.createElement('link')\n\n  link.type = 'text/css'\n  link.rel = 'stylesheet'\n  link.charset = 'utf-8'\n  link.href = url\n  link.setAttribute('force', false)\n\n  return new Promise((resolve, reject) => {\n    let timerId = setTimeout(() => clearState(true), 1.2e4)\n\n    function clearState(isError) {\n      clearTimeout(timerId)\n      link.onerror = link.onload = link.onreadystatechange = null // 同时检查两种状态，只要有一种触发就删除事件处理器，避免触发两次\n\n      isError && link && remove(link)\n    }\n\n    link.onload = function() {\n      clearState()\n      resolve(...arguments)\n    }\n\n    link.onerror = function() {\n      clearState(true)\n      reject(...arguments)\n    }\n\n    document.head.appendChild(link)\n  })\n}\n\n/**\n * @description lazy load script from a remote url then returns a promise\n * @param {String} url remote-url\n * @param {String} globalVar global variable key\n * @return {Promise}\n */\nexport function lazyLoadScript(url, globalVar) {\n  const script = document.createElement('script')\n\n  script.type = 'text/javascript'\n  script.charset = 'utf-8'\n  script.src = url\n  script.async = true\n  script.setAttribute('nonce', 'nonce')\n\n  return new Promise((resolve, reject) => {\n    let timerId = setTimeout(\n      () => onLoadFailed(`Reject script ${url}: LOAD_SCRIPT_TIMEOUT`),\n      1.2e4\n    )\n\n    function clearState() {\n      clearTimeout(timerId)\n      script.onerror = script.onload = script.onreadystatechange = null // 同时检查两种状态，只要有一种触发就删除事件处理器，避免触发两次\n      remove(script)\n    }\n\n    function onLoadSuccess() {\n      clearState()\n      resolve(globalVar ? window[globalVar] : undefined, ...arguments)\n    }\n\n    function onLoadFailed() {\n      clearState()\n      reject(...arguments)\n    }\n\n    if (script.readyState !== undefined) {\n      // IE\n      script.onreadystatechange = function change(evt) {\n        if (\n          (script.readyState === 'loaded' ||\n            script.readyState === 'complete') &&\n          (globalVar ? window[globalVar] : true)\n        ) {\n          onLoadSuccess()\n        } else {\n          onLoadFailed('Unknown error happened', evt)\n        }\n      }\n    } else {\n      // Others\n      script.onload = onLoadSuccess\n      script.onerror = function error(evt) {\n        onLoadFailed(`GET ${url} net::ERR_CONNECTION_REFUSED`, evt)\n      }\n    }\n\n    document.body.appendChild(script)\n  })\n}\n\n/**\n * https://stackoverflow.com/questions/20428877/javascript-remove-doesnt-work-in-ie\n * IE doesn't support remove() native Javascript function but does support removeChild().\n * remove\n * @param {HTMLElement} ele\n */\nfunction remove(ele) {\n  if (ele && ele instanceof HTMLElement) {\n    if (typeof ele.remove === 'function') {\n      ele.remove()\n    } else {\n      ele.parentNode.removeChild(ele)\n    }\n  }\n}\n","import {\n  isDev,\n  isObject,\n  isArray,\n  getLogger,\n  getWarning,\n  serialExecute,\n  isFunction\n} from '../utils'\nimport { lazyloadStyle, lazyLoadScript } from '../utils/dom'\n\n/**\n * @class Lazyloader\n * @description only focus on load resource from `config.getResource()`.\n */\nexport default class Lazyloader {\n  static log() {\n    return getLogger('VueMfe.' + Lazyloader.name)(arguments)\n  }\n\n  static warn() {\n    return getWarning('VueMfe.' + Lazyloader.name)(arguments)\n  }\n\n  /**\n   * @constructor\n   */\n  constructor() {\n    /** @type {{}} */\n    this.cached = {}\n  }\n\n  load({ name }) {\n    return this.getRouteEntry(name).then((url) => {\n      const resource = isFunction(url) ? url() : url\n      Lazyloader.log(`start to load ${name} resources:`, resource)\n\n      return isDev && isObject(resource) && !isArray(resource)\n        ? resource /* if local import('url') */\n        : this.installResources(\n            (isArray(resource) ? resource : [resource]).filter(Boolean),\n            this.getName(name)\n          )\n    })\n  }\n\n  getRouteEntry(name) {\n    let cache = this.cached[name]\n\n    if (cache) {\n      return Promise.resolve(cache)\n    } else {\n      return Promise.resolve(this.getResource(name)).then((data = {}) => {\n        this.cached = Object.assign({}, this.cached, data)\n\n        if (data[name]) {\n          return data[name]\n        } else {\n          Lazyloader.log('all resources', JSON.stringify(data))\n          Lazyloader.warn(\n            `The App '${name}' cannot be found in method 'config.getResource()'`\n          )\n        }\n      })\n    }\n  }\n\n  /**\n   * installResources\n   * @description install JS/CSS resources\n   * @typedef {string} Link\n   * @param {Array<Link>} urls\n   * @param {string} name\n   */\n  installResources(urls, name) {\n    const allCss = urls.filter((url) => url.endsWith('.css'))\n    const scripts = urls.filter((url) => url.endsWith('.js'))\n\n    if (isArray(allCss) && allCss.length) {\n      Promise.all(allCss.map((css) => lazyloadStyle(css))).catch((error) =>\n        Lazyloader.warn(error)\n      )\n    }\n\n    if (isArray(scripts) && scripts.length) {\n      return serialExecute(\n        // @ts-ignore\n        scripts.map((script) => () => lazyLoadScript(script, name))\n      ).catch((error) => {\n        throw error\n      })\n    } else {\n      Lazyloader.warn(`no any valid entry script be found in ${urls}`)\n    }\n  }\n\n  getResource(name) {\n    return this.getConfig(name).getResource()\n  }\n\n  getName(name) {\n    return this.getConfig(name).getNamespace(name)\n  }\n\n  getConfig(name = '*') {\n    return this.configs[name] || this.configs['*']\n  }\n\n  setConfig(name, config) {\n    if (isObject(name)) {\n      config = name\n      name = '*'\n    }\n\n    if (!this.configs) {\n      this.configs = {}\n    }\n\n    this.configs[name] = config\n\n    return this\n  }\n}\n","/**\n * findRoute 深度优先递归遍历找到匹配 matchPath 的 Route\n * @typedef {import('vue-router').RouteConfig} Route\n * @param {Array<Route>} routes\n * @param {String} matchPath\n * @returns {Route}\n */\nexport function findRoute(routes = [], matchPath) {\n  let i = 0\n  let matchedRoute = null\n  const l = routes.length\n\n  while (i < l) {\n    const route = routes[i]\n    const { path, children } = route\n\n    if (path === matchPath) {\n      /* 匹配路径 */\n      return route\n    } else if (children && children.length) {\n      /* 深度优先遍历，不匹配，但是有children，则递归children并返回匹配结果 */\n      matchedRoute = findRoute(children, matchPath)\n      i++ /* 自增当前集合索引i */\n    } else {\n      i++ /* 自增当前集合索引i */\n    }\n\n    if (matchedRoute) {\n      return matchedRoute\n    }\n  }\n}\n\n/**\n * @description auto complete path with parent path\n * @param {string} path\n * @param {string} parentPath\n * @returns {string}\n */\nexport function completePath(path, parentPath) {\n  if (parentPath === '/' && path !== '/' && path.startsWith('/')) {\n    return ensurePathSlash(path)\n  } else {\n    return ensurePathSlash(parentPath) + ensurePathSlash(path)\n  }\n}\n\n/**\n * ensurePathSlash\n * @param {string} path\n */\nexport function ensurePathSlash(path) {\n  const trailingSlashRE = /\\/?$/\n  path = path !== '/' ? path.replace(trailingSlashRE, '') : path\n\n  return path ? (ensureSlash(path) ? path : '/' + path) : '/'\n}\n\n/**\n * ensureSlash\n * @param {string} path\n */\nexport function ensureSlash(path) {\n  return path.charAt(0) === '/'\n}\n","import Path2Regexp from 'path-to-regexp'\n\nexport function findRightKey(map, key) {\n  const keys = Object.keys(map)\n\n  if (keys) {\n    /** @type {RegExp[]} */\n    const regexps = keys.map((key) => Path2Regexp(key))\n    let i = 0\n    let l = regexps.length\n\n    while (i++ < l) {\n      const regexp = regexps[i]\n\n      if (regexp.test(key)) {\n        return keys[i]\n      }\n    }\n  }\n}\n","// @ts-ignore\nimport VueRouter from 'vue-router'\nimport { isDev, isString, isArray, isObject, getWarning } from '../utils'\nimport { findRoute, completePath } from '../utils/route'\nimport { findRightKey } from '../utils/path'\n\n/**\n * @class EnhancedRouter\n * @description Dynamically add child routes to an existing route & provides some `helpers` method\n */\nexport default class EnhancedRouter {\n  static warn() {\n    return getWarning(EnhancedRouter.name)(arguments)\n  }\n\n  /**\n   * @typedef {import('vue-router').RouteConfig} VueRoute\n   * @typedef {Object} EnhancedRoute\n   * @property {string} parentPath The nested parent path\n   * @property {string|Array<string>} childrenApps The nested children app name or names array\n   * @typedef {VueRoute & EnhancedRoute} Route\n   *\n   * @typedef {import('vue-router').default} VueRouter\n   * @typedef {Object} EnhancedRouterRef\n   * @property {import('vue-router').RouterOptions} options\n   * @property {Object} matcher\n   * @typedef {VueRouter & EnhancedRouterRef} Router\n   *\n   * @param {Router} router\n   */\n  constructor(router) {\n    // @override `VueRouter.prototype.addRoutes` method\n    if (router.addRoutes !== this.addRoutes) {\n      router.addRoutes = this.addRoutes.bind(this)\n    }\n\n    this.router = router\n\n    /**\n     * @type {Route[]}\n     */\n    // @ts-ignore\n    this.routes = router.options.routes\n    this.pathMap = {}\n    this.pathList = []\n    this.appsMap = {}\n\n    this._init()\n  }\n\n  _init() {\n    this.refreshAndCheckState(this.routes)\n  }\n\n  /**\n   * @description Add new routes into current router, and supports dynamic nest\n   * @see\n   *  + [Dynamically add child routes to an existing route](https://github.com/vuejs/vue-router/issues/1156)\n   *  + [Feature request: replace routes dynamically](https://github.com/vuejs/vue-router/issues/1234#issuecomment-357941465)\n   * @param {Array<Route>} newRoutes VueRoute route option\n   * @param {string} [parentPath]\n   * @param {Array<Route>} [oldRoutes]\n   */\n  addRoutes(newRoutes, parentPath, oldRoutes) {\n    if (isDev) {\n      console.log(this.pathList)\n      console.log(this.pathMap)\n    }\n\n    // before merge new routes we need to check them out does\n    // any path or name whether duplicate in old routes\n    this.refreshAndCheckState(newRoutes, parentPath)\n\n    // reset current router's matcher with merged routes\n    this.router.matcher = new VueRouter(\n      this.normalizeOptions(\n        // @ts-ignore\n        this.adaptRouterOptions(oldRoutes || this.router),\n        { routes: newRoutes },\n        parentPath\n      )\n      // @ts-ignore\n    ).matcher\n  }\n\n  /**\n   * @param {Route[]|Router} routesOrRouter\n   */\n  adaptRouterOptions(routesOrRouter) {\n    if (routesOrRouter) {\n      if (routesOrRouter instanceof VueRouter) {\n        return routesOrRouter.options\n      } else if (isArray(routesOrRouter)) {\n        return { routes: routesOrRouter }\n      }\n    }\n\n    return {}\n  }\n\n  /**\n   * @description normalize the options between oldRouter and newRouter with diff config options\n   * @param {Router[\"options\"]} oldOpts oldRouter\n   * @param {Router[\"options\"]} newOpts newROuter\n   * @param {string} [parentPath]\n   * @returns {Object}\n   */\n  normalizeOptions(oldOpts, newOpts, parentPath) {\n    const { routes: oldRoutes = [], ...oldProps } = oldOpts\n    const { routes: newRoutes = [], ...newProps } = newOpts\n\n    return Object.assign(\n      {\n        routes: this.mergeRoutes(oldRoutes, newRoutes, parentPath)\n      },\n      newProps,\n      oldProps\n    )\n  }\n\n  /**\n   * mergeRoutes\n   * @param {Array<Route>} oldRoutes\n   * @param {Array<Route>} newRoutes\n   * @param {string} [parentPath]\n   * @returns {Array<Route>} oldRoutes\n   */\n  mergeRoutes(oldRoutes, newRoutes, parentPath) {\n    const needMatchPath = parentPath\n\n    newRoutes.forEach((route) => {\n      if (isString(route.parentPath)) {\n        parentPath = route.parentPath\n        delete route.parentPath\n      } else {\n        parentPath = needMatchPath\n      }\n\n      if (isString(parentPath)) {\n        if (parentPath === '') {\n          oldRoutes.push(route)\n        } else {\n          const oldRoute = findRoute(oldRoutes, parentPath)\n          let path = route.path\n\n          if (oldRoute) {\n            ;(oldRoute.children || (oldRoute.children = [])).push(\n              Object.assign({}, route, {\n                path:\n                  parentPath && path.startsWith('/')\n                    ? (path = path.replace(/^\\/*/, ''))\n                    : path /* fix: @issue that nested paths that start with `/` will be treated as a root path */\n              })\n            )\n          }\n        }\n      } else {\n        oldRoutes.push(route)\n      }\n    })\n\n    return oldRoutes\n  }\n\n  /**\n   * @description DFS 刷新路径 pathList 和 pathMap 并检查路由 path 和 name 是否重复\n   * @param {Array<Route>} routes\n   * @param {String} [parentPath]\n   *  1. from method calls: addRoutes(routes, parentPath)\n   *  2. from route property: { path: '/bar', parentPath: '/foo', template: '<a href=\"/foo/bar\">/foo/bar</a>' }\n   */\n  refreshAndCheckState(routes, parentPath) {\n    routes.forEach(\n      ({ path, parentPath: selfParentPath, name, children, childrenApps }) => {\n        /* 优先匹配 route self parentPath */\n        if (selfParentPath) {\n          path = this.genParentPath(path, selfParentPath, name)\n        } else if (parentPath) {\n          path = this.genParentPath(path, parentPath, name)\n        }\n\n        if (path) {\n          if (!this.pathExists(path)) {\n            this.pathList.push(path)\n          } else {\n            EnhancedRouter.warn(`The path ${path} in pathList has been existed`)\n          }\n        }\n\n        if (name) {\n          if (!this.nameExists(name)) {\n            this.pathMap[name] = path\n          } else {\n            EnhancedRouter.warn(`The name ${name} in pathMap has been existed`)\n          }\n        }\n\n        // if childrenApps exists so records it with its fullPath\n        if (childrenApps) {\n          ;[].concat(childrenApps).forEach((app) => {\n            if (typeof app === 'object') {\n              const [appName, appPath] = Object.entries(app).shift()\n\n              this.appsMap[completePath(appPath, path)] = appName\n            } else {\n              this.appsMap[completePath(app, path)] = name\n            }\n          })\n        }\n\n        if (children && children.length) {\n          // @ts-ignore\n          return this.refreshAndCheckState(children, path)\n        }\n      }\n    )\n  }\n\n  genParentPath(path, parentPath, name) {\n    if (this.pathExists(parentPath)) {\n      return (path = completePath(path, parentPath))\n    } else {\n      EnhancedRouter.warn(\n        `Cannot found the parent path ${parentPath} ${\n          name ? 'of ' + name : ''\n        } in Vue-MFE MasterRouter`\n      )\n      return ''\n    }\n  }\n\n  pathExists(path) {\n    return this.pathList.includes(path)\n  }\n\n  nameExists(name) {\n    return this.pathMap[name]\n  }\n\n  getChildrenApps(path) {\n    let apps = this.appsMap[path]\n\n    /**\n     * 需要处理这种情况的路径例： ‘/path/:var’，'/wf/:projectSysNo/form/design'\n     * 路径不是固定 string ‘/a/b’，所以无法直接通过 {key: val} 映射得到对应的结果\n     * 因此引入了 pathToRegExp 这个 lib 来处理这种情况，如果 reg.test(path)\n     * 则认为匹配成功\n     */\n    if (!apps) {\n      const key = findRightKey(this.appsMap, path)\n\n      if (key) {\n        apps = this.appsMap[key]\n      }\n    }\n\n    if (apps) {\n      return [].concat(apps)\n    }\n\n    return null\n  }\n\n  findRoute(routes, route) {\n    let path = (isString(route) && route) || (isObject(route) && route.path)\n    return (path && findRoute(routes || this.routes, path)) || null\n  }\n}\n\nexport const createEnhancedRouter = (router) => new EnhancedRouter(router)\n","import {\n  isString,\n  isObject,\n  isArray,\n  isFunction,\n  getWarning,\n  getLogger,\n  resolveModule\n} from './utils'\n// @ts-ignore\nimport VueRouter from 'vue-router'\nimport Observer from './helpers/Observer'\nimport Lazyloader from './helpers/Lazyloader'\nimport EnhancedRouter from './helpers/EnhancedRouter'\n\nlet _Vue\n\n/**\n * @class VueMfe\n * @description Vue micro front-end Centralized Controller\n */\nexport default class VueMfe extends Observer {\n  static log() {\n    return getLogger(VueMfe.name)(arguments)\n  }\n\n  static warn() {\n    return getWarning(VueMfe.name)(arguments)\n  }\n\n  /**\n   * @description To support a new Vue options `mfe` when Vue instantiation\n   * see https://github.com/vuejs/vuex/blob/dev/src/mixin.js\n   * @param {import('vue').VueConstructor} Vue\n   */\n  static install(Vue) {\n    // @ts-ignore\n    if (VueMfe.install.installed && _Vue === Vue) return\n    // @ts-ignore\n    VueMfe.install.installed = true\n\n    _Vue = Vue\n\n    const version = Number(Vue.version.split('.')[0])\n\n    if (version >= 2) {\n      Vue.mixin({ beforeCreate: initVueMfe })\n    } else {\n      // override init and inject vuex init procedure\n      // for 1.x backwards compatibility.\n      const _init = Vue.prototype._init\n      Vue.prototype._init = function(options = {}) {\n        options.init = options.init\n          ? [initVueMfe].concat(options.init)\n          : initVueMfe\n        _init.call(this, options)\n      }\n    }\n\n    function initVueMfe() {\n      const options = this.$options\n      // store injection\n      if (options.mfe) {\n        this.$mfe =\n          typeof options.mfe === 'function' ? options.mfe() : options.mfe\n      } else if (options.parent && options.parent.$mfe) {\n        this.$mfe = options.parent.$mfe\n      }\n    }\n  }\n\n  /**\n   * @typedef {import('vue-router').RouteConfig} VueRoute\n   * @typedef {Object} EnhancedRoute\n   * @property {string} parentPath The nested parent path\n   * @property {string|Array<string>} childrenApps The nested children app name or names array\n   * @typedef {VueRoute & EnhancedRoute} Route\n   *\n   * @typedef {import('vue-router').default} VueRouter\n   * @typedef {Object} EnhancedRouterRef\n   * @property {import('vue-router').RouteConfig} options\n   * @property {Object} matcher\n   * @typedef {VueRouter & EnhancedRouterRef} Router\n   */\n  constructor(opts = {}) {\n    super()\n\n    // Auto install if it is not done yet and `window` has `Vue`.\n    // To allow users to avoid auto-installation in some cases,\n    // this code should be placed here.\n    if (\n      /* eslint-disable-next-line no-undef */\n      // @ts-ignore\n      !Vue &&\n      typeof window !== 'undefined' &&\n      // @ts-ignore\n      window.Vue &&\n      // @ts-ignore\n      !VueMfe.install.installed\n    ) {\n      // @ts-ignore\n      VueMfe.install(window.Vue)\n    }\n\n    if (!opts || !opts.router || !(opts.router instanceof VueRouter)) {\n      VueMfe.warn(\n        'Must pass the router property in \"Vue.use(VueMfe, { router, config })\"'\n      )\n    }\n\n    const { router, ...config } = opts\n\n    this.router = router\n    this.config = Object.assign({}, VueMfe.DEFAULTS, config)\n    this.installedApps = {}\n    this.helpers = new EnhancedRouter(this.router)\n    this.lazyloader = new Lazyloader().setConfig(this.config)\n\n    this._init()\n  }\n\n  _init() {\n    this.router.beforeEach((to, from, next) => {\n      // when none-matched path\n      if (\n        to.matched.length === 0 ||\n        this.router.match(to.path).matched.length === 0\n      ) {\n        const appName = this._getPrefixName(to)\n        const args = { name: appName, to, from, next }\n\n        if (this.isInstalled(appName)) {\n          const childrenApps = this.helpers.getChildrenApps(\n            to.path || to.fullPath\n          )\n\n          if (childrenApps && childrenApps.length) {\n            return this._installChildrenApps(childrenApps, args)\n          } else {\n            const error = new Error(\n              `${appName} has been installed but it has no any path ${to.path}`\n            )\n            // @ts-ignore\n            error.code = VueMfe.ERROR_CODE.LOAD_DUPLICATE_WITHOUT_PATH\n\n            this.emit('error', error, args)\n          }\n        } else {\n          return this.installApp(args)\n        }\n      } else {\n        return next()\n      }\n    })\n  }\n\n  installApp(args) {\n    const { name, next, to } = args\n\n    if (this.isInstalled(name)) {\n      return true\n    }\n\n    this.installedApps[name] = VueMfe.LOAD_STATUS.START\n    this.emit('start', args)\n\n    /**\n     * handleSuccess\n     * @param {boolean} success\n     */\n    const handleSuccess = (success) => {\n      VueMfe.log(`install app ${name} success`, success)\n\n      if (success) {\n        this.installedApps[name] = VueMfe.LOAD_STATUS.SUCCESS\n        // After apply mini app routes, i must to force next(to)\n        // instead of next(). next() do nothing... bug???\n        next && to && next(to)\n\n        this.emit('end', args)\n      }\n\n      return success\n    }\n\n    /**\n     * handleError\n     * @param {Error|string} error\n     */\n    const handleError = (error) => {\n      if (!(error instanceof Error)) error = new Error(error)\n      // @ts-ignore\n      if (!error.code) error.code = VueMfe.ERROR_CODE.LOAD_ERROR_HAPPENED\n\n      this.installedApps[name] = VueMfe.LOAD_STATUS.FAILED\n      next && next(false) // stop navigating to next route\n\n      this.emit('error', error, args) // error-first like node?! 😊\n    }\n\n    return this.loadAppEntry(args)\n      .then((module) => this.executeAppEntry(module))\n      .then((routes) => this.installAppModule(routes))\n      .then(handleSuccess)\n      .catch(handleError)\n  }\n\n  /**\n   * @param {string|{name: string}} name\n   * @returns {Promise<AppModule>}\n   */\n  loadAppEntry(name) {\n    return this.lazyloader.load(typeof name === 'string' ? { name } : name)\n  }\n\n  /**\n   * executeAppEntry\n   * @description To executes the ESM/UMD app module\n   * @typedef {import('vue').Component} VueComponent\n   * @typedef {(app: VueComponent)=>Promise<Route[]>|Route[]|{init: (app: VueComponent)=>Promise<boolean>, routes: Route[]}} AppModule\n   * @param {AppModule} module\n   * @returns {Promise<Route[]>}\n   * @summary\n   *  1. module is a init function\n   *    module: () => Promise<T>.then((routes: Array<Route> | boolean) => boolean)\n   *  2. module is an array of routes\n   *    module: Array<Route>\n   *  3. module is an object with property 'init' and 'routes'\n   *    module: { init: Function, routes: Array<Route> }\n   */\n  executeAppEntry(module) {\n    module = resolveModule(module)\n\n    /** @type {VueComponent}  */\n    const app = this.router && this.router.app\n\n    if (isFunction(module)) {\n      // routes: () => Promise<T>.then((routes: Array<Route> | boolean) => boolean)\n      // @ts-ignore\n      return Promise.resolve(module(app))\n    } else if (isArray(module)) {\n      // module: Array<Route>\n      // @ts-ignore\n      return module\n    } else if (isObject(module)) {\n      // module: { init: Promise<T>.then((success: boolean) => boolean), routes: Array<Route> }\n      // @ts-ignore\n      return isFunction(module.init) && Promise.resolve(module.init(app))\n    }\n  }\n\n  /**\n   * @param {Route[]} routes\n   * @throws {Error}\n   */\n  installAppModule(routes) {\n    if (isArray(routes)) {\n      if (routes.length) {\n        // @ts-ignore\n        this.helpers.addRoutes(routes, this.config.parentPath)\n        return true\n      } else {\n        VueMfe.warn('`Route[]` has no any valid item')\n      }\n\n      return false\n    } else {\n      let error = new Error(`Module ${name} initialize failed.`)\n      if (routes instanceof Error) error = routes\n\n      // @ts-ignore\n      error.code = VueMfe.ERROR_CODE.LOAD_APP_INIT_FAILED\n      VueMfe.warn(error)\n\n      return false\n    }\n  }\n\n  isInstalled(route) {\n    let name = route\n\n    if (isObject(route) && /\\//.exec(route.path)) {\n      name = this._getPrefixName(route)\n    } else if (isString(route) && /\\//.exec(route)) {\n      name = this._getPrefixNameByDelimiter(route, '/')\n    }\n\n    return this.installedApps[name] === VueMfe.LOAD_STATUS.SUCCESS\n  }\n\n  preinstall(name) {\n    return name && this.installApp({ name })\n  }\n\n  _installChildrenApps(apps, { next, to }) {\n    const allPromises = apps.map((name) => this.installApp({ name }))\n\n    return Promise.all(allPromises)\n      .then((res) => {\n        return res.every(Boolean)\n      })\n      .then((success) => {\n        return success && next && to && next(to)\n      })\n  }\n\n  /**\n   * @description get the domain-app prefix name by current router and next route\n   * @param {VueRoute} route\n   * @returns {string} name\n   */\n  _getPrefixName(route) {\n    return (\n      // @ts-ignore\n      route.domainName ||\n      (route.name && route.name.includes('.')\n        ? this._getPrefixNameByDelimiter(route.name, '.')\n        : this._getPrefixNameByDelimiter(route.path, '/'))\n    )\n  }\n\n  _getPrefixNameByDelimiter(str, delimiter) {\n    return (\n      (this.config.ignoreCase ? str.toLowerCase() : str)\n        .split(delimiter)\n        /* filter all params form route to get right name */\n        .filter(\n          (s) => !Object.values(this.router.currentRoute.params).includes(s)\n        )\n        .filter(Boolean)\n        .map((s) => s.trim())\n        .shift()\n    )\n  }\n}\n\nVueMfe.version = '__VERSION__'\nVueMfe.DEFAULTS = {\n  ignoreCase: true,\n  parentPath: null,\n  getNamespace: (name) => `__domain__app__${name}`\n}\nVueMfe.LOAD_STATUS = {\n  SUCCESS: 1,\n  START: 0,\n  FAILED: -1\n}\nVueMfe.ERROR_CODE = {\n  LOAD_ERROR_HAPPENED: VueMfe.LOAD_STATUS.FAILED,\n  LOAD_DUPLICATE_WITHOUT_PATH: -2,\n  LOAD_APP_INIT_FAILED: -3\n}\n"],"names":["const","let","this","super"],"mappings":"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"}