{"version":3,"file":"vue-mfe.js","sources":["../src/utils/index.js","../src/helpers/Observer.js","../src/utils/dom.js","../src/helpers/Lazyloader.js","../src/utils/route.js","../src/helpers/EnhancedRouter.js","../src/index.js"],"sourcesContent":["export const isDev = process.env.NODE_ENV === 'development'\n\nexport const isMaster = process.env.VUE_APP_MASTER !== undefined\n\nexport const isPortal = !isMaster || process.env.VUE_APP_PORTAL !== undefined\n\nexport const noop = () => {}\n\nexport const isArray = (arr) => Array.isArray(arr)\n\nexport const isFunction = (fn) => fn && typeof fn === 'function'\n\nexport const isObject = (obj) => obj && typeof obj === 'object'\n\nexport const isString = (str) => typeof str === 'string'\n\nexport const toArray = (args) => Array.prototype.slice.call(args)\n\nexport const hasConsole =\n  // eslint-disable-next-line\n  typeof console !== 'undefined' && typeof console.warn === 'function'\n\nexport function assert(condition, onSuccess, onFailure) {\n  if (condition) {\n    return isFunction(onSuccess) && onSuccess()\n  } else {\n    return isFunction(onFailure) && onFailure()\n  }\n}\n\nexport const getLogger = (key) => (args) => {\n  return assert(\n    isDev,\n    // eslint-disable-next-line\n    () => hasConsole && console.log.apply(null, key ? [key, ...toArray(args)] : args),\n    noop\n  )\n}\n\nexport const getWarning = (key) => (args) => {\n  const throwError = (err) => {\n    throw new Error(err)\n  }\n\n  // eslint-disable-next-line\n  const fn = isDev ? throwError : hasConsole ? console.warn : noop\n\n  return assert(true, () => {\n    fn.apply(null, key ? [[key, ...toArray(args)].join(' > ')] : args)\n  })\n}\n\n/* https://github.com/reduxjs/redux/blob/master/src/utils/actionTypes.js */\nexport const randomString = () =>\n  Math.random()\n    .toString(36)\n    .substring(7)\n    .split('')\n    .join('.')\n\n/**\n * capitalize\n * @param {String} str\n */\nexport const capitalize = (str) => str.charAt(0).toUpperCase() + str.slice(1).toLowerCase()\n\n/**\n * camelize\n * @param {String} str\n * @param {Boolean} pascalCase\n */\nexport const camelize = (str, pascalCase = false) => str\n  .split(/-|_|\\s/g)\n  .map((s, i) => (!pascalCase && i === 0 ? s : capitalize(s)))\n  .join('')\n\n/**\n * @description resolve module whether ES Module or CommandJS module\n * @param {Module} module\n * @returns {any*}\n */\nexport const resolveModule = (module) => ((module && module.default) || module)\n\n/**\n * @description Define immutable property for the given object\n * @param {Object} obj\n * @param {String} key\n * @param {any*} val\n */\nexport const defineImmutableProp = (obj, key, val) => {\n  Object.defineProperty(obj, key, {\n    value: val,\n    configurable: false,\n    enumerable: false,\n    writable: false,\n  })\n}\n\n/**\n * @description execute an array of promises serially\n * @param {Array<Promise<T>>} promises\n * @returns {Promise<T>} the finally result of promises\n */\nexport const serialExecute = (promises) => {\n  return promises.reduce((chain, next) => {\n    return chain\n      .then((retVal) => next(retVal))\n      .catch((err) => {\n        throw err\n      })\n  }, Promise.resolve())\n}\n","/**\n * @class Observer\n * @author VuChan\n * @constructor\n * @see https://github.com/vuchan/fe-utils/blob/master/helpers/Obersver.js\n * @return {Object} Observer Design Pattern Implementation\n */\nexport default function Observer() {\n  this.events = {};\n}\n\n/**\n * observer.on('eventName', function listener() {})\n * @param  {string} eventName\n * @param  {Function} listener\n * @return {Array<Function>}\n */\nObserver.prototype.on = function(eventName, listener) {\n  if (!this.events[eventName]) {\n    this.events[eventName] = [ listener ];\n  } else {\n    this.events[eventName].push(listener);\n  }\n\n  return this.events[eventName];\n};\n\n/**\n * observer.off('eventName', function listener() {})\n * @param  {string} eventName\n * @param  {Function} listener\n * @return {boolean|null}\n */\nObserver.prototype.off = function(eventName, listener) {\n  if (eventName) {\n    let handlers = this.events[eventName];\n\n    if (handlers && handlers.length) {\n      if (listener) {\n        return (handlers = handlers.filter((handler) => handler === listener));\n      } else {\n        delete this.events[eventName];\n        return true;\n      }\n    }\n  } else {\n    this.events = {};\n  }\n};\n\n/**\n * observer.emit('eventName', data1, data2, ...dataN)\n * @param  {string} eventName\n * @param  {Array}  data\n * @return {boolean}\n */\nObserver.prototype.emit = function(eventName, ...data) {\n  const handlers = this.events[eventName];\n\n  if (handlers) {\n    handlers.forEach((handler) => handler.apply(null, data));\n    return true;\n  }\n};\n","/**\n * @description lazy load style form a remote url then returns a promise\n * @param {String} url remote-url\n * @param {String} globalVar global variable key\n * @return {Promise}\n */\nexport function lazyloadStyle(url) {\n  const link = document.createElement('link')\n\n  link.type = 'text/css'\n  link.rel = 'stylesheet'\n  link.charset = 'utf-8'\n  link.href = url\n  link.setAttribute('force', false)\n\n  return new Promise((resolve, reject) => {\n    let timerId = setTimeout(() => clearState(true), 1.2e4)\n\n    function clearState(isError) {\n      clearTimeout(timerId)\n      link.onerror = link.onload = link.onreadystatechange = null // 同时检查两种状态，只要有一种触发就删除事件处理器，避免触发两次\n\n      isError && link && link.remove()\n    }\n\n    link.onload = function() {\n      clearState()\n      resolve(...arguments)\n    }\n\n    link.onerror = function() {\n      clearState(true)\n      reject(...arguments)\n    }\n\n    document.head.appendChild(link)\n  })\n}\n\n/**\n * @description lazy load script form a remote url then returns a promise\n * @param {String} url remote-url\n * @param {String} globalVar global variable key\n * @return {Promise}\n */\nexport function lazyLoadScript(url, globalVar) {\n  const script = document.createElement('script')\n\n  script.type = 'text/javascript'\n  script.charset = 'utf-8'\n  script.src = url\n  script.async = true\n  script.setAttribute('nonce', 'nonce')\n\n  return new Promise((resolve, reject) => {\n    let timerId = setTimeout(\n      () => onLoadFailed(`Reject script ${url}: LOAD_SCRIPT_TIMEOUT`),\n      1.2e4\n    )\n\n    function clearState() {\n      clearTimeout(timerId)\n      script.onerror = script.onload = script.onreadystatechange = null // 同时检查两种状态，只要有一种触发就删除事件处理器，避免触发两次\n      script.remove()\n    }\n\n    function onLoadSuccess() {\n      clearState()\n      resolve(globalVar ? window[globalVar] : undefined, ...arguments)\n    }\n\n    function onLoadFailed() {\n      clearState()\n      reject(...arguments)\n    }\n\n    if (script.readyState !== undefined) {\n      // IE\n      script.onreadystatechange = function change(evt) {\n        if (\n          (script.readyState === 'loaded' ||\n            script.readyState === 'complete') &&\n          (globalVar ? window[globalVar] : true)\n        ) {\n          onLoadSuccess()\n        } else {\n          onLoadFailed('Unknown error happened', evt)\n        }\n      }\n    } else {\n      // Others\n      script.onload = onLoadSuccess\n      script.onerror = function error(evt) {\n        onLoadFailed(`GET ${url} net::ERR_CONNECTION_REFUSED`, evt)\n      }\n    }\n\n    document.body.appendChild(script)\n  })\n}\n","import { isDev, isObject, isArray, getLogger, getWarning, serialExecute, isFunction } from '../utils';\nimport { lazyloadStyle, lazyLoadScript } from '../utils/dom'\n\n/**\n * @class Lazyloader\n * @description only focus on load resource from `config.getResource()`.\n */\nexport default class Lazyloader {\n  static log () {\n    return getLogger('VueMfe.' + Lazyloader.name)(arguments)\n  }\n\n  static warn() {\n    return getWarning('VueMfe.' + Lazyloader.name)(arguments)\n  }\n\n  constructor() {\n    this.cached = {}\n  }\n\n  load({ name }) {\n    return this.getRouteEntry(name)\n      .then((url) => {\n        const resource = isFunction(url) ? url() : url\n        Lazyloader.log('getRouteEntry resource', resource);\n\n        return isDev && isObject(resource) && !isArray(resource)\n          ? resource /* if local import('url') */\n          : this.installResources(isArray(resource) ? resource : [resource], this.getName(name))\n      })\n  }\n\n  getRouteEntry (name) {\n    let cache = this.cached[name]\n\n    if (cache) {\n      return Promise.resolve(cache)\n    } else {\n      return Promise.resolve(this.getResource(name))\n        .then((data = {}) => {\n          // merge cached with data\n          this.cached = Object.assign({}, this.cached, data)\n\n          if (data[name]) {\n            return data[name]\n          } else {\n            Lazyloader.log('resources object', JSON.stringify(data))\n            Lazyloader.warn(\n              `The '${name}' cannot be found in 'config.getResource()'`\n            )\n          }\n        })\n    }\n  }\n\n  /**\n   * installResources\n   * @description install JS/CSS resources\n   * @param {Array<URL> | URL} urls\n   * @param {string} name\n   */\n  installResources (urls, name) {\n    const allCss = urls.filter((url) => url.endsWith('.css'))\n    const scripts = urls.filter((url) => url.endsWith('.js'))\n\n    if (isArray(allCss) && allCss.length) {\n      Promise.all(allCss.map((css) => lazyloadStyle(css))).catch((error) => Lazyloader.warn(error))\n    }\n\n    if (isArray(scripts) && scripts.length) {\n      return serialExecute(\n        scripts.map((script) => () => lazyLoadScript(script, name))\n      ).catch((error) => {\n        throw error\n      })\n    } else {\n      Lazyloader.warn(`no any valid entry script be found in ${urls}`)\n    }\n  }\n\n  getResource(name) {\n    return this.getConfig(name).getResource()\n  }\n\n  getName(name) {\n    return this.getConfig(name).getNamespace(name)\n  }\n\n  getConfig(name = '*') {\n    return this.configs[name] || this.configs['*']\n  }\n\n  setConfig(name, config) {\n    if (isObject(name)) {\n      config = name\n      name = '*'\n    }\n\n    if (!this.configs) {\n      this.configs = {}\n    }\n\n    this.configs[name] = config\n\n    return this\n  }\n}\n","/**\n * findRoute 深度优先递归遍历找到匹配 matchPath 的 Route\n * @param {Array<Route>} routes\n * @param {String} matchPath\n * @returns {Object<Route>}\n */\nexport function findRoute(routes = [], matchPath) {\n  let i = 0\n  let matchedRoute = null\n  const l = routes.length\n\n  while (i < l) {\n    const route = routes[i]\n    const { path, children } = route\n\n    if (path === matchPath) {\n      /* 匹配路径 */\n      return route\n    } else if (children && children.length) {\n      /* 深度优先遍历，不匹配，但是有children，则递归children并返回匹配结果 */\n      matchedRoute = findRoute(children, matchPath)\n      i++ /* 自增当前集合索引i */\n    } else {\n      i++ /* 自增当前集合索引i */\n    }\n\n    if (matchedRoute) {\n      return matchedRoute\n    }\n  }\n}\n\n/**\n * @description auto complete path with parent path\n * @param {String} path\n * @param {String} parentPath\n * @returns {String}\n */\nexport function completePath(path, parentPath) {\n  if (parentPath === '/' && path !== '/' && path.startsWith('/')) {\n    return ensurePathSlash(path)\n  } else {\n    return ensurePathSlash(parentPath) + ensurePathSlash(path)\n  }\n}\n\nexport function ensurePathSlash(path) {\n  const trailingSlashRE = /\\/?$/\n  path = path !== '/' ? path.replace(trailingSlashRE, '') : path\n\n  return path ? (ensureSlash(path) ? path : '/' + path) : ''\n}\n\nexport function ensureSlash(path) {\n  return path.charAt(0) === '/'\n}\n","import VueRouter from 'vue-router'\nimport { isString, isObject, getWarning } from '../utils'\nimport { findRoute, completePath } from '../utils/route'\n\n/**\n * @class EnhancedRouter\n * @description Dynamically add child routes to an existing route & provides some `helpers` method\n */\nexport default class EnhancedRouter {\n  static warn() {\n    return getWarning(EnhancedRouter.name)(arguments)\n  }\n\n  constructor(router) {\n    if (router.addRoutes !== this.addRoutes) {\n      router.addRoutes = this.addRoutes\n    }\n\n    this.router = router\n    this.routes = router.options.routes\n    this.pathMap = {}\n    this.pathList = []\n\n    this._init()\n  }\n\n  _init() {\n    this.refreshAndCheckState(this.routes)\n  }\n\n  /**\n   * @description Add new routes into current router, and supports dynamic nest\n   * @see\n   *  + [Dynamically add child routes to an existing route](https://github.com/vuejs/vue-router/issues/1156)\n   *  + [Feature request: replace routes dynamically](https://github.com/vuejs/vue-router/issues/1234#issuecomment-357941465)\n   * @param {Array<Route>} routes VueRoute route option\n   * @param {?String} parentPath\n   */\n  addRoutes(routes, parentPath) {\n    this.refreshAndCheckState(routes, parentPath)\n    this.router.matcher = new VueRouter(\n      this.normalizeOptions(this.router.options, { routes }, parentPath)\n    ).matcher\n  }\n\n  /**\n   * @description normalize the options between oldRouter and newRouter with diff config options\n   * @param {Object} oldOpts oldRouter VueRouter configuration options\n   * @param {Object} newOpts newROuter VueRouter configuration options\n   * @param {?String} parentPath\n   * @returns {Object}\n   */\n  normalizeOptions(oldOpts, newOpts, parentPath) {\n    const { routes: oldRoutes, ...oldProps } = oldOpts\n    const { routes: newRoutes, ...newProps } = newOpts\n\n    return Object.assign(\n      {\n        routes: this.mergeRoutes(oldRoutes, newRoutes, parentPath),\n      },\n      newProps,\n      oldProps\n    )\n  }\n\n  /**\n   * @description before merge new routes we need to check it out does its path or name duplicate in old routes\n   * @param {Array<Route>} oldRoutes\n   * @param {Array<Route>} newRoutes\n   * @param {?String} parentPath\n   * @returns {Array<Route>} oldRoutes\n   */\n  mergeRoutes(oldRoutes, newRoutes, parentPath) {\n    const needMatchPath = parentPath\n\n    newRoutes.forEach(route => {\n      if (isString(route.parentPath)) {\n        parentPath = route.parentPath\n        delete route.parentPath\n      } else {\n        parentPath = needMatchPath\n      }\n\n      if (isString(parentPath)) {\n        if (parentPath === '') {\n          oldRoutes.push(route)\n        } else {\n          const oldRoute = findRoute(oldRoutes, parentPath)\n          let path = route.path\n\n          if (oldRoute) {\n            (oldRoute.children || (oldRoute.children = [])).push(\n              Object.assign({}, route, {\n                path: (\n                  parentPath && path.startsWith('/')\n                    ? path = path.replace(/^\\/*/, '')\n                    : path\n                ) /* fix: @issue that nested paths that start with `/` will be treated as a root path */,\n              }))\n          }\n        }\n      } else {\n        oldRoutes.push(route)\n      }\n    })\n\n    return oldRoutes\n  }\n\n  /**\n   * @description 递归刷新路径 pathList 和 pathMap 并检查路由 path 和 name 是否重复\n   * @param {Array<Route>} newRoutes\n   * @param {String} parentPath\n   *  1. from method calls: addRoutes(routes, parentPath)\n   *  2. from route property: { path: '/bar', parentPath: '/foo', template: '<a href=\"/foo/bar\">/foo/bar</a>' }\n   */\n  refreshAndCheckState(routes, parentPath) {\n    routes.forEach(({ path, parentPath: selfParentPath, name, children }) => {\n      /* 优先匹配 route self parentPath */\n      if (selfParentPath) {\n        path = this.getParentPath(path, selfParentPath, name)\n      } else if (parentPath) {\n        path = this.getParentPath(path, parentPath, name)\n      }\n\n      if (path) {\n        if (!this.pathExists(path)) {\n          this.pathList.push(path)\n        } else {\n          EnhancedRouter.warn(`The path ${path} in pathList has been existed`)\n        }\n      }\n\n      if (name) {\n        if (!this.nameExists(name)) {\n          this.pathMap[name] = path\n        } else {\n          EnhancedRouter.warn(`The name ${name} in pathMap has been existed`)\n        }\n      }\n\n      if (children && children.length) {\n        return this.refreshAndCheckState(children, path)\n      }\n    })\n  }\n\n  getParentPath(path, parentPath, name) {\n    if (this.pathExists(parentPath)) {\n      return path = completePath(path, parentPath)\n    } else {\n      EnhancedRouter.warn(`Cannot found the parent path ${parentPath} ${name ? 'of ' + name : ''} in Vue-MFE MasterRouter`)\n      return ''\n    }\n  }\n\n  pathExists(path) {\n    return this.pathList.includes(path)\n  }\n\n  nameExists(name) {\n    return this.pathMap[name]\n  }\n\n  findRoute(route) {\n    let path = (isString(route) && route) || (isObject(route) && route.path)\n    return path && findRoute(this.routes, path) || null\n  }\n}\n\nexport const createEnhancedRouter = (router) => new EnhancedRouter(router)\n","import VueRouter from 'vue-router'\nimport { isString, isObject, isArray, isFunction, getWarning, getLogger, resolveModule } from './utils'\nimport Observer from './helpers/Observer'\nimport Lazyloader from './helpers/Lazyloader'\nimport EnhancedRouter from './helpers/EnhancedRouter'\n\n\n/**\n * @class VueMfe\n * @description Vue micro front-end Centralized Controller\n */\nexport default class VueMfe extends Observer {\n  static log () {\n    return getLogger(VueMfe.name)(arguments)\n  }\n\n  static warn() {\n    return getWarning(VueMfe.name)(arguments)\n  }\n\n  constructor(opts = {}) {\n    super()\n\n    if (!opts || !opts.router || !(opts.router instanceof VueRouter)) {\n      VueMfe.warn('Must pass the router property in \\'Vue.use(VueMfe, { router, config })\\'')\n    }\n\n    const { router, ...config } = opts\n\n    this.router = router\n    this.config = Object.assign({}, VueMfe.DEFAULTS, config)\n    this.installedApps = {}\n\n    this._init()\n  }\n\n  _init() {\n    this.helpers = new EnhancedRouter(this.router)\n    this.lazyloader = new Lazyloader().setConfig(this.config)\n\n    this.router.beforeEach((to, from, next) => {\n      if (to.matched.length === 0 || this.router.match(to.path).matched.length === 0) {\n        const appName = this._getPrefixName(to)\n        const args = { name: appName, to, from, next}\n\n        if (this.isInstalled(appName)) {\n          const error = new Error(`${appName} has been installed but it does not have path ${to.path}`)\n          error.code = VueMfe.ERROR_CODE.LOAD_DUPLICATE_WITHOUT_PATH\n\n          this.emit('error', error, args)\n        } else {\n          this.installApp(args)\n        }\n      } else {\n        next()\n      }\n    })\n  }\n\n  installApp(args) {\n    const { name, next, to } = args\n\n    this.installedApps[name] = VueMfe.LOAD_STATUS.START\n    this.emit('start', args)\n\n    return this.lazyloader.load(args)\n      .then((module) => {\n        VueMfe.log('installApp module', module)\n        return this.installModule(module)\n      })\n      .then((success) => {\n        VueMfe.log('installApp success', success)\n        if (success) {\n          this.installedApps[name] = VueMfe.LOAD_STATUS.SUCCESS\n\n          // After apply mini app routes, i must to force next(to)\n          // instead of next(). next() do nothing... bug???\n          next && to && next(to)\n          this.emit('end', args)\n        }\n      })\n      .catch(error => {\n        if (!(error instanceof Error)) error = new Error(error)\n        if (!error.code) error.code = VueMfe.ERROR_CODE.LOAD_ERROR_HAPPENED\n        this.installedApps[name] = VueMfe.LOAD_STATUS.FAILED\n\n        next && next(false) // stop navigating to next route\n        this.emit('error', error, args)\n      })\n  }\n\n  /**\n   * installModule\n   * @description install ESM/UMD app module\n   * @param {Module} module\n   * @example\n   *  1. module is a init function\n   *    module: () => Promise<T>.then((routes: Array<Route> | boolean) => boolean)\n   *  2. module is an array of routes\n   *    module: Array<Route>\n   *  3. module is an object with property 'init' and 'routes'\n   *    module: { init: Function, routes: Array<Route> }\n   */\n  installModule(module) {\n    module = resolveModule(module)\n\n    const router = this.router\n    const app = router.app || {}\n\n    // call init mini app (add routes mini app):\n    if (module) {\n      if (isFunction(module)) {\n        // routes: () => Promise<T>.then((routes: Array<Route> | boolean) => boolean)\n        return Promise.resolve(module(app)).then(routesOrBool => {\n          return this._checkRoutes(routesOrBool)\n        })\n      } else if (isArray(module)) {\n        // module: Array<Route>\n        return this.addRoutes(module)\n      } else if (isObject(module)) {\n        // module: { init: Promise<T>.then((success: boolean) => boolean), routes: Array<Route> }\n        return isFunction(module.init) && Promise.resolve(module.init(app)).then(bool => {\n          return (bool === false || bool instanceof Error) ? this._checkRoutes(bool) : this.addRoutes(module.routes)\n        })\n      }\n    } else {\n      return false\n    }\n  }\n\n  addRoutes(routes, parentPath) {\n    if (routes) {\n      if (routes.length) {\n        this.helpers.addRoutes(routes, parentPath || this.config.parentPath)\n\n        return true\n      } else {\n        VueMfe.warn('Routes has no any valid item')\n      }\n    } else {\n      VueMfe.warn('Must pass a valid \\'routes: Array<Route>\\' in `addRoutes` method')\n    }\n\n    return false\n  }\n\n  isInstalled(route) {\n    let name = route\n\n    if (isObject(route) && /\\//.exec(route.path)) {\n      name = this._getPrefixName(route)\n    } else if (isString(route) && /\\//.exec(route)) {\n      name = this._getPrefixNameByDelimiter(route, '/')\n    }\n\n    return this.installedApps[name] === VueMfe.LOAD_STATUS.SUCCESS\n  }\n\n  preinstall(name) {\n    return name && this.installApp({ name })\n  }\n\n  /**\n   * @description get the domain-app prefix name by current router and next route\n   * @param {VueRouter} router\n   * @param {VueRoute} next\n   * @param {?Boolean} ignoreCase\n   */\n  _getPrefixName (route) {\n    return route.name && route.name.includes('.')\n      ? this._getPrefixNameByDelimiter(route.name, '.')\n      : this._getPrefixNameByDelimiter(route.path, '/')\n  }\n\n  _getPrefixNameByDelimiter(str, delimiter) {\n    return (\n      (this.config.ignoreCase ? str.toLowerCase() : str)\n        .split(delimiter)\n        /* filter all params form router to get right name */\n        .filter(\n          (s) => !Object.values(this.router.currentRoute.params).includes(s)\n        )\n        .filter(Boolean)\n        .map((s) => s.trim())\n        .shift()\n    )\n  }\n\n  _checkRoutes(routesOrBool) {\n    if (routesOrBool) {\n      return this.addRoutes(routesOrBool)\n    } else {\n      if (routesOrBool instanceof Error) {\n        routesOrBool.code = VueMfe.ERROR_CODE.APP_INIT_FAILED\n        throw routesOrBool\n      } else {\n        VueMfe.warn('Module ' + name + ' initialize failed.')\n      }\n    }\n\n    return false\n  }\n}\n\nVueMfe.version = '__VERSION__'\nVueMfe.DEFAULTS = {\n  ignoreCase: true,\n  parentPath: null,\n  getNamespace: (name) => `__domain__app__${name}`,\n}\nVueMfe.LOAD_STATUS = {\n  SUCCESS: 1,\n  START: 0,\n  FAILED: -1,\n}\nVueMfe.ERROR_CODE = {\n  LOAD_ERROR_HAPPENED: VueMfe.LOAD_STATUS.FAILED,\n  LOAD_DUPLICATE_WITHOUT_PATH: -2,\n  APP_INIT_FAILED: -3,\n}\n"],"names":["const","let","this","super"],"mappings":"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"}