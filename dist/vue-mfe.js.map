{"version":3,"file":"vue-mfe.js","sources":["../src/helpers/utils.js","../src/helpers/index.js","../src/createMasterRouter.js","../src/helpers/routerHelpers.js","../src/lazyloader/index.js","../src/helpers/createRouterInterceptor.js","../src/index.js"],"sourcesContent":["export const isArray = (arr) => Array.isArray(arr)\n\nexport const isFunction = (fn) => fn && typeof fn === 'function'\n\nexport const isObject = (obj) => obj && typeof obj === 'object'\n\nexport const isString = (str) => typeof str === 'string'\n\n/* https://github.com/reduxjs/redux/blob/master/src/utils/actionTypes.js */\nexport const randomString = () =>\n  Math.random()\n    .toString(36)\n    .substring(7)\n    .split('')\n    .join('.')\n\n/**\n * capitalize\n * @param {String} str\n */\nexport const capitalize = (str) => {\n  return str.charAt(0).toUpperCase() + str.slice(1).toLowerCase()\n}\n\n/**\n * camelize\n * @param {String} str\n * @param {Boolean} pascalCase\n */\nexport const camelize = (str, pascalCase = false) => {\n  return str\n    .split(/-|_|\\s/g)\n    .map((s, i) => (!pascalCase && i === 0 ? s : capitalize(s)))\n    .join('')\n}\n\nexport const resolveModule = (module) => {\n  return (module && module.default) || module\n}\n\nexport const getAppPrefixName = (to) =>\n  to.name && to.name.includes('.')\n    ? filterByDelimiter(to.name, '.')\n    : filterByDelimiter(to.path, '/')\n\nexport function filterByDelimiter(str, delimiter) {\n  return (\n    str\n      .split(delimiter)\n      /* filter all params form router to get right name */\n      .filter(\n        (s) => !Object.values(GlobalPageRouter.currentRoute.params).includes(s)\n      )\n      .filter(Boolean)\n      .map((s) => s.trim())\n      .shift()\n  )\n}\n\nexport const defineImmutableProp = (obj, key, val) => {\n  Object.defineProperty(obj, key, {\n    value: val,\n    configurable: false,\n    enumerable: false,\n    writable: false,\n  })\n}\n\nexport const serialExecute = (promises) => {\n  return promises.reduce((chain, next) => {\n    return chain\n      .then((retVal) => next(retVal))\n      .catch((err) => {\n        throw err\n      })\n  }, Promise.resolve())\n}\n\n/**\n * lazyLoadScript\n * @author Vuchan\n * @desc lazy load script form a remote url then returns a promise\n * @param {String} url remote-url\n * @param {String} globalVar global variable key\n * @return {Promise}\n */\nexport function lazyLoadScript(url, globalVar) {\n  const script = document.createElement('script')\n  const timeout = 120000\n\n  script.type = 'text/javascript'\n  script.charset = 'utf-8'\n  script.src = url\n  script.async = true\n  script.setAttribute('nonce', 'nonce')\n\n  let _reject = null\n  let _resolve = null\n\n  function onLoadFailed() {\n    clearState()\n    _reject && _reject(...arguments)\n  }\n\n  function onLoadSuccess() {\n    _resolve && _resolve(globalVar ? window[globalVar] : undefined)\n    clearState()\n  }\n\n  function clearState() {\n    clearTimeout(timerId)\n    script.onerror = script.onload = script.onreadystatechange = null // 同时检查两种状态，只要有一种触发就删除事件处理器，避免触发两次\n    script.remove()\n  }\n\n  document.body.appendChild(script)\n\n  /* 在 appendChild 之后开始计时 */\n  let timerId = setTimeout(\n    () => onLoadFailed(`Reject script ${url} error`),\n    timeout\n  )\n\n  return new Promise((resolve, reject) => {\n    _resolve = resolve\n    _reject = reject\n\n    if (script.readyState !== undefined) {\n      // IE\n      script.onreadystatechange = function change(evt) {\n        if (\n          (script.readyState === 'loaded' ||\n            script.readyState === 'complete') &&\n          (globalVar ? window[globalVar] : true)\n        ) {\n          onLoadSuccess()\n        } else {\n          onLoadFailed(`Unknown error happened`, evt)\n        }\n      }\n    } else {\n      // Others\n      script.onload = function load() {\n        onLoadSuccess()\n      }\n\n      script.onerror = function error(evt) {\n        onLoadFailed(`GET ${url} net::ERR_CONNECTION_REFUSED`, evt)\n      }\n    }\n  })\n}\n","import { isFunction } from './utils'\n\nexport const isDev = process.env.NODE_ENV === 'development'\nexport const isMaster = process.env.VUE_APP_MASTER !== undefined\nexport const isPortal = !isMaster || process.env.VUE_APP_PORTAL !== undefined\n\nexport function assert(condition, onSuccess, onFailure) {\n  if (condition) {\n    return isFunction(onSuccess) && onSuccess()\n  } else {\n    return isFunction(onFailure) && onFailure()\n  }\n}\n\nexport function info() {\n  return assert(isDev, () => console.info.apply(console, arguments))\n}\n\nexport function warn() {\n  const fn =\n    (!isDev &&\n      (typeof console !== 'undefined' &&\n        typeof console.warn === 'function' &&\n        console.warn)) ||\n    ((err) => {\n      throw new Error(err)\n    })\n\n  return assert(true, () => {\n    fn.apply(this, arguments)\n  })\n}\n","import { createPageRouter } from './index'\nimport { isArray, isObject } from './helpers/utils'\nimport { warn } from './helpers/index'\n\n/**\n * createMasterRouter\n * @description 如果是 MasterRouter 则直接覆盖 PageRouter\n * @param {Array|Object} routesOrConfig\n * @returns\n */\nexport default function createMasterRouter(routesOrConfig) {\n  if (isArray(routesOrConfig)) {\n    return createPageRouter(routesOrConfig)\n  } else if (isObject(routesOrConfig)) {\n    const { routes, mode, ...config } = routesOrConfig\n\n    if (isArray(routes) && routes.length) {\n      return createPageRouter(routes, config, mode)\n    }\n  }\n\n  warn(\n    'Must pass a valid routes array for `createMaster(config: { routes: Array<Route>, [props]: any }): Object<Master>>`'\n  )\n}\n","import Vue from 'vue'\nimport VueRouter from 'vue-router'\nimport { isDev, warn, info, assert } from './index'\nimport { defineImmutableProp } from './utils'\n\n/* install router plugin */\nVue.use(VueRouter)\n\n/**\n * master-memo-cache\n * 在 master-router 中维护的 pathList、pathMap，VueRouter 中也维护了这两个变量，但是没有暴露。\n * 本地维护有两个目的:\n *  1. 是在当 portal-router 中调用 `addPortalRoutes` 时，比对、校验、去重\n *  2. 暴露给 portal-app 看其是否需要，如果上游做了很完善的逻辑判断，似乎没必要在暴露到下游\n */\nlet pathList = []\nlet pathMap = {}\n\n// 内部维护的两个闭包变量 _router, _routes\nlet _router = null // router: VueRouter\nlet _routes = [] // routes: Array<Route>\n\n/**\n * createRouter 根据 routes 创建 router，但会新增一些内部方法以增强router\n * @param {Array<Route>} routes\n * @returns {Object<Router<VueRouter>>}\n * @inspired from https://github.com/vuejs/vue-router/issues/1234#issuecomment-357941465\n */\nexport const createRouter = (routes = [], mode = 'history') => {\n  /* 刷新内部私有的闭包变量 _routes */\n  if (!_routes || !_routes.length) _routes = routes\n\n  /* 刷新维护的路由状态 */\n  refreshPathStates(routes)\n\n  if (process.env.NODE_ENV === 'development') {\n    info('pathList: ', pathList)\n    info('pathMap: ', pathMap)\n  }\n\n  let router = new VueRouter({\n    routes,\n    // Use the HTML5 history API (i.e. normal-looking routes)\n    // instead of routes with hashes (e.g. example.com/#/about).\n    // This may require some server configuration in production:\n    // https://router.vuejs.org/en/essentials/history-mode.html#example-server-configurations\n    mode,\n    // Simulate native-like scroll behavior when navigating to a new\n    // route and using back/forward buttons.\n    scrollBehavior(to, from, savedPosition) {\n      if (savedPosition) {\n        return savedPosition\n      } else {\n        return { x: 0, y: 0 }\n      }\n    },\n  })\n\n  /*\n   * 只能赋值1次，不可重复赋值。后续赋值更新了闭包中 _router 的引用，导致当前 router 的实例被更新。\n   * 因为 _router.matcher === router.matcher 导致 resetRouter 中的动态修改 _router.matcher 无法生效\n   */\n  if (!_router) {\n    _router = router\n    const helpers = Object.create(null)\n\n    defineImmutableProp(helpers, 'completePaths', completePaths)\n    defineImmutableProp(helpers, 'findRoute', findRoute)\n    defineImmutableProp(helpers, 'findPathName', findPathName)\n    defineImmutableProp(helpers, 'nameExists', nameExists)\n    defineImmutableProp(helpers, 'pathExists', pathExists)\n\n    // 增加实例自身属性 addRoutes，不复写原型构造函数的成员方法\n    defineImmutableProp(_router, 'addRoutes', addPortalRoutes)\n    // 挂载工具方法 helpers 到 router 实例上 router.helpers.findPathName(path: String)\n    defineImmutableProp(_router, 'helpers', helpers)\n  }\n\n  return router\n}\n\n/* 重置 master-router 的路由映射 Matcher */\nfunction resetRouter(routes) {\n  const newRouter = createRouter(routes)\n  _router.matcher = newRouter.matcher // the relevant part\n\n  return _router\n}\n\n/**\n * addPortalRoutes 添加新的 portal 路由，可按需指定嵌套的 parentPath\n * @param {Array<Route>} newRoutes 需要被注册到 master-router 的新路由\n * @param {routePath: String = '/'} prependPath\n *  newRoutes 默认注册到 '/' 的 children 下\n *  prependPath 优先级： prependPath parameter < route.parentPath\n * @summary\n *  1. 除非调用 resetRouter 方法，否则所有现有路由的 path 和 name 都是不允许被覆盖的\n * @issue\n *  + route 的 path 不能带有 '/' 前缀\n *  `Note that nested paths that start with / will be treated as a root path. This allows you to leverage the component nesting without having to use a nested URL.`\n *  + route: { path: '/b', parentPath: '/error' } 在 master-router 存在 '/error' 的前提下，调用 router.match('/error/b') 无法 match\n */\nfunction addPortalRoutes(newRoutes = [], prependPath = '/') {\n  let hasParentPathRouteLength = 0\n  const noParentPathRoutes = [] /* 没有声明 */\n  const unRegisteredRoutes = newRoutes\n    .filter((route) => {\n      /* 过滤掉存在单个 parentPath 的路由 */\n      if (!route.parentPath) {\n        noParentPathRoutes.push(route)\n        return false\n      } else {\n        /* 更新 flag，并返回 boolean */\n        return Boolean(++hasParentPathRouteLength)\n      }\n    })\n    .filter(\n      (route) => !registerRoute(route) /* filter 取非返回注册未成功的路由 */\n    )\n\n  if (prependPath && noParentPathRoutes.length) {\n    unRegisteredRoutes.concat(\n      noParentPathRoutes.filter(\n        (route) =>\n          !registerRoute(Object.assign(route, { parentPath: prependPath }))\n      )\n    )\n  }\n\n  /* 当所有路由全部注册成功后，才重设 Matcher */\n  if (\n    /* 不存在 parentPathRoute && prependPath 或者 未注册成功的路由长度为0 */\n    (!hasParentPathRouteLength && !prependPath) ||\n    unRegisteredRoutes.length === 0\n  ) {\n    return resetRouter(_routes)\n  } else {\n    info('hasParentPathRouteLength: ', hasParentPathRouteLength)\n    info('prependPath: ', prependPath)\n    info('unRegisteredRoutes: ', unRegisteredRoutes)\n\n    warn(\n      `Add routes failed, those routes ${JSON.stringify(\n        unRegisteredRoutes\n      )} cannot be registered.`\n    )\n  }\n}\n\n/**\n * @method refreshPathStates\n * @description 递归刷新 pathList 和 pathMap\n * @param {Array<Route>} newRoutes\n * @param {String} parentPath\n */\nfunction refreshPathStates(newRoutes = [], parentPath = '') {\n  newRoutes.forEach(({ path, name, children }) => {\n    if (parentPath) path = completePaths(path, parentPath)\n    if (name && !pathMap[name]) pathMap[name] = path\n    if (path && !pathList.includes(path)) pathList.push(path)\n\n    if (children && children.length) {\n      refreshPathStates(children, path)\n    }\n  })\n}\n\n/**\n * registerRoute 递归注册新路由\n * @param {Object<Route>} route\n * @param {Array<Route>} beforeRoutes\n * @returns {Boolean} true: 注册成功，false: 注册失败\n */\nfunction registerRoute(\n  { path, name, parentPath, ...props },\n  beforeRoutes = _routes\n) {\n  const completePath = parentPath ? completePaths(path, parentPath) : path\n  const existsPath = parentPath ? pathExists(completePath) : pathExists(path)\n  const existNameWithPath = name && nameExists(name)\n\n  assert(existsPath, () => {\n    const pathName = findPathName(name)\n    const errorMsg = `\n      The path ${path} cannot be registered ${\n      parentPath ? 'to parentPath ' + parentPath : ''\n    },\n      because of it was already registered ${\n        pathName ? 'in pathMap ' + pathName : ''\n      }before.\n    `\n\n    assert(\n      /* 业务开发过程中，可能需要在自己开环境使用 path === '/' */\n      path === '/',\n      () => isDev && console.warn(errorMsg),\n      () => warn(errorMsg)\n    )\n  })\n\n  assert(existNameWithPath, () =>\n    warn(`\n      The name ${name} cannot be registered to path ${path}\n      ${parentPath ? ' with parentPath ' + parentPath : ''}\n    },\n      because of it already registered in pathList ${existNameWithPath} before.\n    `)\n  )\n\n  const route = Object.assign(\n    {\n      path:\n        (\n          parentPath !== '/' &&\n          path.startsWith('/')\n            ? path.replace(/^\\/*/, '')\n            : path\n        ) /* fix: addPortalRoutes() @issue */,\n      name,\n    },\n    props || {}\n  )\n\n  /* 如果存在 parentPath 且 parentPath 已存在记录 */\n  if (parentPath && pathExists(parentPath)) {\n    /* 递归找到匹配 parentPath 的 matchedRoute */\n    const matchedRoute = findRoute(beforeRoutes, parentPath)\n\n    if (matchedRoute) {\n      if (matchedRoute.children && matchedRoute.children.length) {\n        /* 这里不用再判断当前的 matchedRoute.children中 是否已存在相同的 completePath，因为上面的 existsPath 已经处理过 */\n        matchedRoute.children.push(route)\n      } else {\n        matchedRoute.children = [route]\n      }\n\n      /* 注册成功 */\n      return true\n    } else {\n      warn(\n        `Register path '${path}' failed, cannot found parent path '${parentPath}',\n        Are you sure the parent path exists in MasterRouter/routes before?`\n      )\n    }\n  } else {\n    if (parentPath !== undefined && typeof parentPath === 'string') {\n      beforeRoutes.push(route)\n    } else {\n      warn(\n        `Register path '${path}' failed, parentPath '${parentPath} does not exist'`\n      )\n    }\n  }\n}\n\n/**\n * findRoute 深度优先递归遍历找到匹配 matchPath 的 Route\n * @param {Array<Route>} routes\n * @param {String} matchPath\n * @returns {Object<Route>}\n */\nfunction findRoute(routes = [], matchPath) {\n  let i = 0\n  let matchedRoute = null\n  const l = routes.length\n\n  while (i < l) {\n    const route = routes[i]\n    const { path, children } = route\n\n    if (path === matchPath) {\n      /* 匹配路径 */\n      return route\n    } else if (children && children.length) {\n      /* 深度优先遍历，不匹配，但是有children，则递归children并返回匹配结果 */\n      matchedRoute = findRoute(children, matchPath)\n      i++ /* 自增当前集合索引i */\n    } else {\n      i++ /* 自增当前集合索引i */\n    }\n\n    if (matchedRoute) {\n      return matchedRoute\n    }\n  }\n}\n\nfunction completePaths(path, parentPath) {\n  if (parentPath === '/' && path !== '/' && path.startsWith('/')) {\n    return ensurePathSlash(path)\n  } else {\n    return ensurePathSlash(parentPath) + ensurePathSlash(path)\n  }\n}\n\nfunction ensurePathSlash(path) {\n  const trailingSlashRE = /\\/?$/\n  path = path !== '/' ? path.replace(trailingSlashRE, '') : path\n\n  return path ? (ensureSlash(path) ? path : '/' + path) : ''\n}\n\nfunction ensureSlash(path) {\n  return path.charAt(0) === '/'\n}\n\nfunction pathExists(path) {\n  return pathList.includes(path)\n}\n\nfunction nameExists(name) {\n  return pathMap[name]\n}\n\nfunction findPathName(path) {\n  return Object.keys(pathMap).find((name) => pathMap[name] === path)\n}\n\nexport function getRouter() {\n  return _router\n}\n\nexport function getRoutes() {\n  return _routes\n}\n\nexport { addPortalRoutes }\n","import { getMasterConfig } from '../index'\nimport { getRouter } from '../helpers/routerHelpers'\nimport { warn, info, isDev, isPortal } from '../helpers/index'\nimport {\n  camelize,\n  isArray,\n  isString,\n  isObject,\n  isFunction,\n  resolveModule,\n  serialExecute,\n  lazyLoadScript,\n  getAppPrefixName,\n} from '../helpers/utils'\n\nlet cached = null\n\nexport function lazyloader(to, next) {\n  const name = camelize(getAppPrefixName(to))\n  const config = getMasterConfig(name) || {}\n  const { onLoadStart, onLoadSuccess, onLoadError, getNamespace = () => `__domain__app__${name}` } = config\n\n  isFunction(onLoadStart) && onLoadStart(name, config)\n  info('app-name: ', name)\n\n  return getRouteEntry(name, next)\n    .then((url) => {\n      return isDev && isObject(url) && !isArray(url)\n        ? url\n        : installScript(url, getNamespace(name))\n    })\n    .then((module) => {\n      if (module) {\n        return installModule(module)\n      } else {\n        throw new Error(\n          `[vue-mfe/lazyloader]: Cannot get valid value of Module ${name}`\n        )\n      }\n    })\n    .then((success) => {\n      if (success) {\n        next(to)\n        isFunction(onLoadSuccess) && onLoadSuccess(name, config)\n      } else {\n        throw new Error(`[vue-mfe/lazyloader]: Register dynamic routes failed`)\n      }\n    })\n    .catch((error) => {\n      isFunction(onLoadError) ? onLoadError(error, next) : next(false)\n    })\n}\n\n/**\n * getRouteEntry\n * @todo TODO: 如果是本地开发环境，则此处不需要发起请求，import 本地资源即可\n * @desc 获取 Portal 路由入口 entry-[chunkhash:8].umd.js 文件\n * @param {Object} data => cached\n * @param {String} names => portal app name\n * @returns {Object|undefined}\n */\nfunction getRouteEntry(name, next) {\n  /* 先取本地JS Heap中缓存，无缓存再取Server */\n  if (cached && cached[name]) {\n    return Promise.resolve(cached[name])\n  } else {\n    return getResource().then((data) => {\n      if (data) {\n        // merge cached with data\n        cached = Object.assign({}, cached, data)\n\n        if (cached[name]) {\n          return cached[name]\n        } else {\n          info('[vue-mfe/getRouteEntry]: resources object: ', data)\n          warn(\n            `[vue-mfe/getRouteEntry]: The '${name}' cannot be found in resources object: ${JSON.stringify(\n              Object.keys(data)\n            )}`\n          )\n\n          next(false)\n        }\n      } else {\n        return next({ name: 404 })\n      }\n    })\n  }\n}\n\nfunction getResource() {\n  const config = getMasterConfig()\n\n  try {\n    return config && config.getResource && config.getResource()\n  } catch (e) {\n    return Promise.reject(e)\n  }\n}\n\n/**\n * installScript\n * @desc 懒加载 JS 资源\n * @param {Array<String<URL>>|String<URL>} urls\n * @param {String} name\n */\nfunction installScript(urls, name) {\n  if (isArray(urls) && urls.length) {\n    return serialExecute(\n      urls.map((url) => () => lazyLoadScript(url, name))\n    ).catch((err) => {\n      throw err\n    })\n  } else if (isString(urls)) {\n    return serialExecute([() => lazyLoadScript(urls, name)])\n  }\n}\n\nfunction installModule(module) {\n  module = resolveModule(module)\n\n  const router = getRouter()\n  const app = router.app || {}\n  let routes = null\n\n  // call init mini app (add routes mini app):\n  if (module) {\n    if (isFunction(module)) {\n      // const value = await module(app)\n      return Promise.resolve(module(app)).then(routes => {\n        if (isArray(routes) && routes.length) {\n          return router.addRoutes(routes)\n        } else if (routes === false) {\n          return warn(`[vue-mfe/installModule]: Module ${name} initialize failed.`)\n        }\n      })\n    }\n\n    // 如果直接是数组，则直接把这些数组理解成 routes\n    if (isArray(module)) {\n      routes = module\n    } else if (isObject(module)) {\n      // 如果不想进入后续逻辑，可在 init 函数中抛出错误即可\n      // 因为 installModule 会 catch 这个错误然后抛出异常\n      isFunction(module.init) && module.init(app)\n\n      if (module.routes && module.routes.length) {\n        routes = module.routes\n      } else {\n        return warn(\n          `[vue-mfe/installModule]: Must pass a valid routes array in 'module.routes' property of ${name}!`\n        )\n      }\n    }\n\n    router.addRoutes(routes)\n\n    // After apply mini app routes, i must to force next(to)\n    // instead of next(). next() do nothing... bug???\n    // next(to)\n    return true\n  } else {\n    // stop navigating to next route\n    // next(false)\n    return false\n  }\n}\n","import { lazyloader } from '../lazyloader/index'\nimport { isDev, isMaster } from './index'\n\nexport default function createRouterInterceptor(router) {\n  router.beforeEach((to, from, next) => {\n    /* 如果是本地开发环境或者是 MasterRuntime 都需要对未知路由进行懒加载处理 */\n    if (isDev || isMaster) {\n      if (router.match(to.path).matched.length === 0) {\n        lazyloader(to, next)\n      } else {\n        next()\n      }\n    } else {\n      next({ name: 404 })\n    }\n  })\n}\n","import createMasterRouter from './createMasterRouter'\nimport createRouterInterceptor from './helpers/createRouterInterceptor'\nimport { defineImmutableProp } from './helpers/utils'\nimport {\n  createRouter,\n  addPortalRoutes,\n  getRouter,\n  getRoutes,\n} from './helpers/routerHelpers'\n\n/**\n * createPageRouter 中心化路由\n * @description 闭包缓存 _router, _routes & _config\n * @param {Array<Route>} routes\n * @returns {}\n */\nexport function createPageRouter(routes, config, mode) {\n  let hasRouter = hasMasterRouter()\n  let router = hasRouter ? addPortalRoutes(routes) : createRouter(routes, mode)\n\n  /* flag: 是否绑定增强特性 */\n  if (!hasRouter) {\n    router._config = config || {}\n    /* 创建全局引用，避免 portal 覆盖了 GlobalPageRouter */\n    defineImmutableProp(window, 'GlobalPageRouter', router)\n    /* 拦截未装载路由 */\n    createRouterInterceptor(router)\n  }\n\n  return router\n}\n\nexport {\n  getRouter as getMasterRouter,\n  getRoutes as getMasterRoutes,\n  createMasterRouter,\n}\nexport function hasMasterRouter() {\n  return window.GlobalPageRouter !== null && getRouter() !== null\n}\nexport function getMasterConfig() {\n  return (hasMasterRouter() && getRouter()._config) || {}\n}\n"],"names":["const","let","arguments","this","createMasterRouter"],"mappings":"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"}