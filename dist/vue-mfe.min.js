/*!
  * vue-mfe v1.1.2
  * (c) 2020 GivingWu
  * @license MIT
  */
var n,e;n=this,e=function(n,e){"use strict";e=e&&e.hasOwnProperty("default")?e.default:e;var t=!1,r=function(n){return Array.isArray(n)},o=function(n){return n&&"function"==typeof n},i=function(n){return n&&"object"==typeof n},u=function(n){return"string"==typeof n},a=function(n){return i(n)&&n instanceof Promise&&o(n.then)},c="undefined"!=typeof console&&"function"==typeof console.warn,f=function(){if(t)throw Error.apply(window,arguments);c&&console.warn.apply(window,arguments)};function s(n){n&&n instanceof HTMLElement&&("function"==typeof n.remove?n.remove():n.parentNode.removeChild(n))}function p(n){return""+(i(n)?JSON.stringify(n):""+n)}var l=new Map,h=function(){return y().router},d=function(){return h().app},v=function(n){return y(n).globalVar||"__domain__app__"+n},m=function(n){return y(n).name},y=function(n){return void 0===n&&(n="*"),l.get(n)||{}},w=function(n,e){return i(n)&&(n=(e=n).prefix||"*"),!(!u(n)||!i(e))&&l.set(n,e)},g="load-error";function E(n,e,t,r,o){n||n instanceof Error||(n=new Error("\u3010"+(m(r)||r)+"\u3011\uff1a"+e)),t&&!n.code&&(n.code=t),r&&!n.name&&(n.name=r),d().$emit(g,n,o)}var b="LOAD_ERROR_HAPPENED",P="LOAD_DUPLICATE_WITHOUT_PATH",R=new Map,O={};function x(n){return O[n]?Promise.resolve(O[n]):A(n).then(function(e){var u=o(e)?e():e;try{if(t&&i(u)&&!r(u))return u;var c=M((r(u)?u:[u]).filter(Boolean),v(n));if(a(c))return c.then(function(e){return e&&(O[n]=e)})}catch(n){throw new Error(n)}})}var A=function(n){return Promise.resolve(function(n){var e=R.get(n);if(e&&i(e))return e;try{var t=y(n);if(t&&t.resources||(t=y()),t&&t.resources){if(o(t.resources)){var r=t.resources();return R.set(n,r),r}if(i(t.resources)){var u=t.resources;return R.set(n,u),u}}}catch(e){E(e,"Cannot get the resources .","LOAD_RESOURCES_ERROR",n)}}(n)).then(function(e){return e&&e[n]||f("The App key '"+n+"' cannot be found in "+JSON.stringify(e))})},M=function(n,e){var t=n.filter(function(n){return n.endsWith(".css")}),o=n.filter(function(n){return n.endsWith(".js")});return r(t)&&t.length&&Promise.all(t.map(function(n){return e=n,(t=document.createElement("link")).type="text/css",t.rel="stylesheet",t.charset="utf-8",t.href=e,t.setAttribute("force",!1),new Promise(function(n,e){var r=setTimeout(function(){return o(!0)},12e3);function o(n){clearTimeout(r),t.onerror=t.onload=t.onreadystatechange=null,n&&t&&s(t)}t.onload=function(){o(),n.apply(void 0,arguments)},t.onerror=function(){for(var n=arguments.length,t=Array(n);n--;)t[n]=arguments[n];o(!0),e(new(Function.prototype.bind.apply(Error,[null].concat(t))))},document.head.appendChild(t)});var e,t})).catch(f),r(o)&&o.length?T(o.map(function(n){return function(){return function n(e,t,r){return void 0===t&&(t=3),void 0===r&&(r=0),new Promise(function(o,i){return e().then(o).catch(function(u){1!==t?setTimeout(function(){n(e,t-1,r).then(o,i)},r):i(u)})})}(function(){return function(n,e){var t=document.createElement("script");return t.type="text/javascript",t.charset="utf-8",t.src=n,t.async=!0,t.setAttribute("nonce","nonce"),new Promise(function(r,o){var i=setTimeout(function(){return c("Reject script "+n+": LOAD_SCRIPT_TIMEOUT")},12e3);function u(){clearTimeout(i),t.onerror=t.onload=t.onreadystatechange=null,s(t)}function a(){for(var n=arguments.length,t=Array(n);n--;)t[n]=arguments[n];u(),r.apply(void 0,[e?window[e]:void 0].concat(t))}function c(){for(var n=arguments.length,e=Array(n);n--;)e[n]=arguments[n];u(),o(new(Function.prototype.bind.apply(Error,[null].concat(e))))}void 0!==t.readyState?t.onreadystatechange=function(n){"loaded"!==t.readyState&&"complete"!==t.readyState||e&&!window[e]?c("Unknown error happened: "+p(n)):a()}:(t.onload=a,t.onerror=function(e){c("GET "+n+" net::ERR_CONNECTION_REFUSED:  "+p(e))}),document.body.appendChild(t)})}(n,e)})}})):f("No any valid script be found in "+n)},T=function(n){return n.reduce(function(n,e){return n.then(function(n){return e(n)}).catch(function(n){throw n})},Promise.resolve())},_=function(n,e){return void 0===n&&(n=""),void 0===e&&(e="/"),n.split(e).map(function(n){return n.trim()}).filter(Boolean).shift()};function j(n){return!!(i(n)&&(n.fullPath||n.path||n.name)&&n.component)}var S=1,V=0,C={};function N(n){return C[n]===S}function $(n,e){return C[n]=e}var L=function(n){var e=n.name,t=n.next,u=n.to;if(N(e))return!0;var a=d();$(e,V),a.$emit("load-start",n);return x(e).then(function(n){return function(n,e){if(i(n)&&j(n))return h().addRoutes([n]);if(r(n)&&n.every(j))return h().addRoutes(n);var t=D(n),u=y().parentPath;if(i(t)){var a=t.init,c=t.routes,f=t.parentPath;return Promise.resolve(o(a)&&a(d())).then(function(){h().addRoutes(c,f||u)})}throw new Error("\n      Cannot not found 'export default VueMfe.createSubApp({ prefix: "+e+", routes: [] })' in '"+e+"/src/portal.entry.js'\n    ")}(n,e)}).then(function(){return $(e,S),a.$emit("load-success",n),t&&u&&t(u),!0}).catch(function(r){$(e,-1),E(r,"",b,e,n),t&&t(!1)})},D=function(n){return n&&n.default||n};function k(n,e){if(void 0===e&&(e="."),!y())throw new Error("Before you call `VueMfe.Lazy(url: string)` must set its config by `VueMfe.Lazy.setConfig({ resource: Resource[] })`");var t=_(n,e),r=n.slice(t.length+e.length);return t&&x(t).then(function(n){var e=I(D(n),r);return o(e)?e():e})}k.setConfig=function(n){return w(n)};var I=function(n,e){return e.split(".").reduce(function(n,e){return n[e]},n)},U=function(n,e){var t,r=[],o=0,i=0,u="",a=e&&e.delimiter||W,c=e&&e.whitelist||void 0,f=!1;for(;null!==(t=B.exec(n));){var s=t[0],p=t[1],l=t.index;if(u+=n.slice(i,l),i=l+s.length,p)u+=p[1],f=!0;else{var h="",d=t[2],v=t[3],m=t[4],y=t[5];if(!f&&u.length){var w=u.length-1,g=u[w],E=!c||c.indexOf(g)>-1;E&&(h=g,u=u.slice(0,w))}u&&(r.push(u),u="",f=!1);var b="+"===y||"*"===y,P="?"===y||"*"===y,R=v||m,O=h||a;r.push({name:d||o++,prefix:h,delimiter:O,optional:P,repeat:b,pattern:R?z(R):"[^"+H(O===a?O:O+a)+"]+?"})}}(u||i<n.length)&&r.push(u+n.substr(i));return r},J=function(n,e,t){for(var r=(t=t||{}).strict,o=!1!==t.start,i=!1!==t.end,u=t.delimiter||W,a=[].concat(t.endsWith||[]).map(H).concat("$").join("|"),c=o?"^":"",f=0;f<n.length;f++){var s=n[f];if("string"==typeof s)c+=H(s);else{var p=s.repeat?"(?:"+s.pattern+")(?:"+H(s.delimiter)+"(?:"+s.pattern+"))*":s.pattern;e&&e.push(s),s.optional?s.prefix?c+="(?:"+H(s.prefix)+"("+p+"))?":c+="("+p+")?":c+=H(s.prefix)+"("+p+")"}}if(i)r||(c+="(?:"+H(u)+")?"),c+="$"===a?"$":"(?="+a+")";else{var l=n[n.length-1],h="string"==typeof l?l[l.length-1]===u:void 0===l;r||(c+="(?:"+H(u)+"(?="+a+"))?"),h||(c+="(?="+H(u)+"|"+a+")")}return new RegExp(c,function(n){return n&&n.sensitive?"":"i"}(t))},W="/",B=new RegExp(["(\\\\.)","(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?"].join("|"),"g");function H(n){return n.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1")}function z(n){return n.replace(/([=!:$/()])/g,"\\$1")}function F(n,e){return"/"===e?"/"!==n?q(n):e:q(e)+q(n)}function q(n){return(n="/"!==n?n.replace(/\/?$/,""):n)?function(n){return"/"===n.charAt(0)}(n)?n:"/"+n:"/"}var G={},K=function(n,e){n&&[].concat(n).forEach(function(n){"object"==typeof n?Object.keys(n).forEach(function(t){var r=n[t];G[F(r,e)]=t}):G[F(n,e)]=name})},Q=function(n){var e=G[n];if(!e){var t=function(n,e){var t=Object.keys(n);if(t)for(var r=t.map(function(n){return J(U(n))}),o=0,i=r.length;o++<i;)if(r[o].test(e))return t[o]}(G,n);t&&(e=G[t])}return e?[].concat(e):null},X=function(n){var e=n.map(function(n){return L({name:n})});return Promise.all(e).then(function(n){return n.every(Boolean)})},Y=[],Z={},nn=function(n){return Y.includes(n)},en=function(n){return Z[n]},tn=function(n,e,t){return nn(e)?F(n,e):(f("Cannot found the parent path "+e+" "+(t?"of "+t:"")+" in router"),"")};function rn(n,e){n.forEach(function(n){var t=n.path,r=n.parentPath,o=n.name,i=n.children,u=n.childrenApps;if(t&&(r?t=tn(t,r,o):e&&(t=tn(t,e,o))),t&&(nn(t)?f("The path "+t+" in pathList has been existed"):Y.push(t)),o&&(en(o)?f("The name "+o+" in pathMap has been existed"):Z[o]=t),K(u,t),i&&i.length)return rn(i,t)}),t&&(console.log(Y),console.log(Z))}function on(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&-1===e.indexOf(r)&&(t[r]=n[r]);return t}function un(n,t,o){rn(n,t),h().matcher=new e(function(n,e,t){var r=n.routes;void 0===r&&(r=[]);var o=on(n,["routes"]),i=e.routes;void 0===i&&(i=[]);var u=on(e,["routes"]);return Object.assign({routes:an(r,i,t)},u,o)}(function(n){if(n){if(n instanceof e)return n.options;if(r(n))return{routes:n}}return{}}(o||h()),{routes:n},t)).matcher}function an(n,e,t){var r=t;return e.forEach(function(e){if(u(e.parentPath)?(t=e.parentPath,delete e.parentPath):t=r,u(t))if(""===t)n.push(e);else{var o=function n(e,t){if(void 0===e&&(e=[]),e)for(var r,o=0;o<e.length;o++){if((r=e[o]).path===t)return r;if(r.children&&(r=n(r.children,t)))return r}}(n,t),i=e.path;o&&(o.children||(o.children=[])).push(Object.assign({},e,{path:t&&i.startsWith("/")?i=i.replace(/^\/*/,""):i}))}else n.push(e)}),n}function cn(n){n.beforeEach(function(n,e,t){if((a=n).name&&en(a.name)||nn(a.path)||0!==a.matched.length)return t();var r=function(n){if(i(n)){var e=n.fullPath||n.path;if(u(e))return _(e);var t=n.name;if(u(t))return _(t,".")}}(n);if(r){var o={name:r,to:n,from:e,next:t};if(!function(n){return C[n]===V}(r)){if(!N(r))return L(o);var a,c=Q(n.fullPath||n.path);if(c&&c.length)return function(n,e){var t=e.next,r=e.to,o=e.name;return X(n).then(function(n){return n&&t&&r&&t(r)}).catch(function(n){E(n,"",b,o,e)})}(c,o);E(null,r+" has been installed but it has no any path like "+n.path,P,r,o)}}})}var fn={sensitive:!1,parentPath:"/",resources:function(){throw new Error("Must implements 'resources: {[prefix: string]: Resources | () => Resources | () => Promise<Resources>}' by yourself.")}};function sn(n){if(!n.router)throw new Error("Missing property 'router: VueRouter' in config \n"+JSON.stringify(n));if(!(n.router instanceof e))throw new Error("The router must be an instance of VueRouter not "+typeof n.router);var t;w(Object.assign({},fn,n)),(t=n.router).addRoutes!==un&&(t.addRoutes=un.bind(t)),rn(t.options.routes),cn(t)}function pn(n){if(!n.prefix)throw new Error("Missing property 'prefix: string' in config \n"+JSON.stringify(n));if(!n.routes)throw new Error("Missing property 'routes: Route[]' in config \n"+JSON.stringify(n));return w(n),n}var ln={version:"1.1.2",Lazy:k,createApp:sn,createSubApp:pn,isInstalled:N};"undefined"==typeof window||!window.Vue||window.VueMfe&&window.VueMfe===ln||(window.VueMfe=window.VueMfe&&window.VueMfe.version===ln.version?window.VueMfe:ln),n.createApp=sn,n.createSubApp=pn,n.default=ln,Object.defineProperty(n,"__esModule",{value:!0})},"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("vue-router")):"function"==typeof define&&define.amd?define(["exports","vue-router"],e):e(n.VueMfe={},n.VueRouter);